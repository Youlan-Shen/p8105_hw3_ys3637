p8105_hw3_ys3637
================
Youlan Shen
2022-10-15

``` r
# library all packages that we need at the beginning
library(tidyverse)
```

    ## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──
    ## ✔ ggplot2 3.3.6      ✔ purrr   0.3.4 
    ## ✔ tibble  3.1.8      ✔ dplyr   1.0.10
    ## ✔ tidyr   1.2.0      ✔ stringr 1.4.1 
    ## ✔ readr   2.1.2      ✔ forcats 0.5.2 
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()

## Problem 1

This problem uses the Instacart data. DO NOT include this dataset in
your local data directory; instead, load the data from the
p8105.datasets using:

``` r
library(p8105.datasets)
data("instacart")
```

## Problem 2

Accelerometers have become an appealing alternative to self-report
techniques for studying physical activity in observational studies and
clinical trials, largely because of their relative objectivity. During
observation periods, the devices measure “activity counts” in a short
period; one-minute intervals are common. Because accelerometers can be
worn comfortably and unobtrusively, they produce around-the-clock
observations.

This problem uses five weeks of accelerometer data collected on a 63
year-old male with BMI 25, who was admitted to the Advanced Cardiac Care
Center of Columbia University Medical Center and diagnosed with
congestive heart failure (CHF). The data can be downloaded here. In this
spreadsheet, variables activity.\* are the activity counts for each
minute of a 24-hour day starting at midnight.

### Read in, tidy, and describe the data

Load, tidy, and otherwise wrangle the data. Your final dataset should
include all originally observed variables and values; have useful
variable names; include a weekday vs weekend variable; and encode data
with reasonable variable classes. Describe the resulting dataset
(e.g. what variables exist, how many observations, etc).

``` r
# read in data from CSV file
accel_data <- read_csv("data/accel_data.csv")
```

    ## Rows: 35 Columns: 1443
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr    (1): day
    ## dbl (1442): week, day_id, activity.1, activity.2, activity.3, activity.4, ac...
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
# show the first several lines of the original data
head(accel_data)
```

    ## # A tibble: 6 × 1,443
    ##    week day_id day      activi…¹ activ…² activ…³ activ…⁴ activ…⁵ activ…⁶ activ…⁷
    ##   <dbl>  <dbl> <chr>       <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>
    ## 1     1      1 Friday       88.4    82.2    64.4    70.0    75.0    66.3    53.8
    ## 2     1      2 Monday        1       1       1       1       1       1       1  
    ## 3     1      3 Saturday      1       1       1       1       1       1       1  
    ## 4     1      4 Sunday        1       1       1       1       1       1       1  
    ## 5     1      5 Thursday     47.4    48.8    46.9    35.8    49.0    44.8    73.4
    ## 6     1      6 Tuesday      64.8    59.5    73.7    45.7    42.4    58.4    76.8
    ## # … with 1,433 more variables: activity.8 <dbl>, activity.9 <dbl>,
    ## #   activity.10 <dbl>, activity.11 <dbl>, activity.12 <dbl>, activity.13 <dbl>,
    ## #   activity.14 <dbl>, activity.15 <dbl>, activity.16 <dbl>, activity.17 <dbl>,
    ## #   activity.18 <dbl>, activity.19 <dbl>, activity.20 <dbl>, activity.21 <dbl>,
    ## #   activity.22 <dbl>, activity.23 <dbl>, activity.24 <dbl>, activity.25 <dbl>,
    ## #   activity.26 <dbl>, activity.27 <dbl>, activity.28 <dbl>, activity.29 <dbl>,
    ## #   activity.30 <dbl>, activity.31 <dbl>, activity.32 <dbl>, …

``` r
# clean, tidy, wrangle the data
accel_data <- accel_data %>% 
  janitor::clean_names() %>% 
  rename(day_type = day) %>% 
  pivot_longer(
    c(activity_1:activity_1440),
    names_to = "minute", 
    values_to = "activity_counts",
    names_prefix = 'activity_') %>% 
  mutate(
    weekday_vs_weekend = ifelse((day_type == "Saturday" | day_type == "Sunday"), "weekend", "weekday"),
    activity_counts = as.double(activity_counts),
    minute = as.integer(minute))
# show the cleaned data
accel_data
```

    ## # A tibble: 50,400 × 6
    ##     week day_id day_type minute activity_counts weekday_vs_weekend
    ##    <dbl>  <dbl> <chr>     <int>           <dbl> <chr>             
    ##  1     1      1 Friday        1            88.4 weekday           
    ##  2     1      1 Friday        2            82.2 weekday           
    ##  3     1      1 Friday        3            64.4 weekday           
    ##  4     1      1 Friday        4            70.0 weekday           
    ##  5     1      1 Friday        5            75.0 weekday           
    ##  6     1      1 Friday        6            66.3 weekday           
    ##  7     1      1 Friday        7            53.8 weekday           
    ##  8     1      1 Friday        8            47.8 weekday           
    ##  9     1      1 Friday        9            55.5 weekday           
    ## 10     1      1 Friday       10            43.0 weekday           
    ## # … with 50,390 more rows

This dataset contains 50400 rows and 6 columns, while each row showing
an activity measure in a single minute during the 5-week data collection
period. Variables include week (from the first week to the fifth week),
day_id(from the first day to the 35th day), day_type (includes Monday to
Sunday), minute (every minute in a single day), activity_counts (the
count that is recorded in the accelerometer), and weekday_vs_weekend
(which distinguishs weekdays and weekend). There are total 50400
observations, which are the activity measures from every minute in a day
during the 5-week period.

The following table shows the total activity counts for each day in this
study period in descending order. In general, we can see from the table
that there is a huge difference between different days, the highest
counts could be 685929 while the lowest is By including weekday vs
weekend variable,

``` r
accel_data %>% 
  group_by(day_id, weekday_vs_weekend, week) %>% 
  summarize(total_activity = sum(activity_counts)) %>% 
  arrange(desc(total_activity)) %>% 
  knitr::kable()
```

    ## `summarise()` has grouped output by 'day_id', 'weekday_vs_weekend'. You can
    ## override using the `.groups` argument.

| day_id | weekday_vs_weekend | week | total_activity |
|-------:|:-------------------|-----:|---------------:|
|     16 | weekday            |    3 |      685910.00 |
|      4 | weekend            |    1 |      631105.00 |
|     29 | weekday            |    5 |      620860.00 |
|     10 | weekend            |    2 |      607175.00 |
|      8 | weekday            |    2 |      568839.00 |
|     33 | weekday            |    5 |      549658.00 |
|      1 | weekday            |    1 |      480542.62 |
|     12 | weekday            |    2 |      474048.00 |
|     21 | weekday            |    3 |      468869.00 |
|     15 | weekday            |    3 |      467420.00 |
|     18 | weekend            |    3 |      467052.00 |
|     35 | weekday            |    5 |      445366.00 |
|     14 | weekday            |    2 |      440962.00 |
|     28 | weekday            |    4 |      434460.00 |
|     13 | weekday            |    2 |      423245.00 |
|     11 | weekend            |    2 |      422018.00 |
|     23 | weekday            |    4 |      409450.00 |
|     30 | weekday            |    5 |      389080.00 |
|     17 | weekend            |    3 |      382928.00 |
|     20 | weekday            |    3 |      381507.00 |
|      3 | weekend            |    1 |      376254.00 |
|     19 | weekday            |    3 |      371230.00 |
|     34 | weekday            |    5 |      367824.00 |
|      5 | weekday            |    1 |      355923.64 |
|     26 | weekday            |    4 |      340291.00 |
|      7 | weekday            |    1 |      340115.01 |
|     27 | weekday            |    4 |      319568.00 |
|      6 | weekday            |    1 |      307094.24 |
|      9 | weekday            |    2 |      295431.00 |
|     25 | weekend            |    4 |      260617.00 |
|     22 | weekday            |    4 |      154049.00 |
|     32 | weekend            |    5 |      138421.00 |
|      2 | weekday            |    1 |       78828.07 |
|     24 | weekend            |    4 |        1440.00 |
|     31 | weekend            |    5 |        1440.00 |
